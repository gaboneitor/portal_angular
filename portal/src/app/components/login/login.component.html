<!-- Login Hero -->
<section class="login-hero" aria-labelledby="login-title">
  <div class="container login-content">

    <div class="login-form-section">
      <div class="login-header">
        <h1 id="login-title">Iniciar Sesión</h1>
        <p class="login-subtitle">Accede a tu panel de automatización de facturación</p>
      </div>

      <form class="login-form" [formGroup]="loginForm" (ngSubmit)="onLogin()" novalidate>
        
        <!-- Mensaje de Error Global -->
        <div class="alert alert-error" *ngIf="errorMessage" role="alert">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
            <line x1="15" y1="9" x2="9" y2="15" stroke="currentColor" stroke-width="2"/>
            <line x1="9" y1="9" x2="15" y2="15" stroke="currentColor" stroke-width="2"/>
          </svg>
          {{ errorMessage }}
        </div>

        <!-- Mensaje de Éxito -->
        <div class="alert alert-success" *ngIf="successMessage" role="alert">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M9 12l2 2 4-4" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
          </svg>
          {{ successMessage }}
        </div>
        
        <div class="form-field">
          <label for="email">Correo electrónico</label>
          <input 
            type="email" 
            id="email" 
            formControlName="username"
            placeholder="tu@empresa.com" 
            [class.error]="hasError('username', 'required') || hasError('username', 'email')"
            autocomplete="email" />
          <span class="error-message" [class.show]="getErrorMessage('username')">
            {{ getErrorMessage('username') }}
          </span>
        </div>
        
        <div class="form-field">
          <label for="password">Contraseña</label>
          <div class="password-input-wrapper">
            <input 
              [type]="showPassword ? 'text' : 'password'" 
              id="password" 
              formControlName="password"
              placeholder="Tu contraseña" 
              [class.error]="hasError('password', 'required') || hasError('password', 'minlength')"
              autocomplete="current-password" />
            <button 
              type="button" 
              class="password-toggle" 
              (click)="togglePasswordVisibility()"
              [attr.aria-label]="showPassword ? 'Ocultar contraseña' : 'Mostrar contraseña'">
              <!-- Icono de ojo abierto -->
              <svg *ngIf="!showPassword" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" stroke="currentColor" stroke-width="2" fill="none"/>
                <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" fill="none"/>
              </svg>
              <!-- Icono de ojo cerrado -->
              <svg *ngIf="showPassword" width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <line x1="1" y1="1" x2="23" y2="23" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
              </svg>
            </button>
          </div>
          <span class="error-message" [class.show]="getErrorMessage('password')">
            {{ getErrorMessage('password') }}
          </span>
        </div>

        <div class="form-options">
          <a href="#" class="forgot-password">¿Olvidaste tu contraseña?</a>
        </div>

        <div class="form-actions">
          <button 
            type="submit" 
            class="btn btn-primary btn-lg btn-full"
            [class.loading]="isLoading"
            [disabled]="isLoading">
            <span class="btn-text">Iniciar Sesión</span>
            <span class="btn-loading">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2" stroke-dasharray="31.416" stroke-dashoffset="31.416">
                  <animate attributeName="stroke-dasharray" dur="2s" values="0 31.416;15.708 15.708;0 31.416" repeatCount="indefinite"/>
                  <animate attributeName="stroke-dashoffset" dur="2s" values="0;-15.708;-31.416" repeatCount="indefinite"/>
                </circle>
              </svg>
              Iniciando sesión...
            </span>
          </button>
        </div>

      </form>

      <div class="login-footer">
        <p>¿No tienes una cuenta? <a href="#" class="signup-link">Regístrate aquí</a></p>
      </div>
    </div>
  </div>
  <div class="hero-wave" aria-hidden="true"></div>
</section>

<!-- Footer simplificado -->
<footer class="site-footer" aria-label="Pie de página">
  <div class="container footer-wrap">
    <div class="footer-brand">
      <span class="brand-mark" aria-hidden="true">🤖</span>
      <span class="brand-text">Bot Facturación</span>
    </div>
    <p class="legal">© 2024 Bot Facturación. Todos los derechos reservados.</p>
  </div>
</footer>